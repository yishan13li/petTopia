<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>商家登入 - Waggy</title>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ"
	crossorigin="anonymous">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link
	href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@300;400;700&display=swap"
	rel="stylesheet">
<link rel="stylesheet" type="text/css" th:href="@{/user_static/css/vendor.css}">
<link rel="stylesheet" type="text/css" th:href="@{/user_static/css/style.css}">

<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/js/all.min.js"></script>
<style>
body {
	font-family: 'Comic Neue', cursive;
	margin: 0;
	padding: 0;
	display: flex;
	flex-direction: column;
	min-height: 100vh;
	background: url('/user_static/images/background-img.png') no-repeat center center/cover;
}
/* Header Styles */
header {
	background-color: #ffffff;
	padding: 1rem 0;
	text-align: center;
	box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

header h1 {
	font-size: 24px;
	font-weight: bold;
	margin: 0;
}

.login-container {
	width: min(90%, 400px); /* 使用相對寬度 */
	margin: 2rem auto;
	background: rgba(255, 255, 255, 0.95);
	padding: 2rem;
	border-radius: 10px;
	box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
	flex-grow: 1;
	margin-left: 65%; /* 將左側間距設為 20%，使其在頁面中間偏右 */
	margin-right: 0;
}

@media (min-width: 768px) {
	.login-container {
		margin-left: 65%;
		width: 25%;
	}
}

.social-btn {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 100%;
	padding: 10px;
	border: 1px solid #ddd;
	border-radius: 5px;
	background-color: white;
	font-weight: 600;
	margin-bottom: 10px;
}

.social-btn img {
	width: 24px;
	height: 24px;
	margin-right: 10px;
}

.social-btn1 {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 100%;
	padding: 10px;
	border: 1px solid #ddd;
	border-radius: 5px;
	background-color: white;
	font-weight: 600;
	margin-bottom: 10px;
}

.social-btn1 img {
	width: 36px;
	height: 36px;
	margin-right: 10px;
}

.divider {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 100%;
	position: relative;
}

.divider::before, .divider::after {
	content: "";
	flex-grow: 1; /* 讓左右線條自動填滿 */
	height: 1px;
	background-color: #ccc;
}

.divider span {
	color: #ccc;
	font-size: 0.75rem;
	padding: 0 16px;
	text-transform: uppercase;
	font-weight: bold;
	white-space: nowrap;
	background: white; /* 確保背景顏色不會讓文字被線擋住 */
	z-index: 1; /* 讓 "或" 文字顯示在上層 */
}

/* Footer Styles */
footer {
	background-color: #ffffff;
	padding: 1rem 0;
	text-align: center;
	box-shadow: 0 -4px 6px rgba(0, 0, 0, 0.1);
}

footer p {
	font-size: 14px;
	margin: 0;
}

footer .social-links {
	margin-top: 20px; /* 這裡加上 margin-top 調整圖示間距 */
}

footer .search-bar {
	margin-top: 20px; /* 這裡加上 margin-top 調整搜尋列位置 */
}
</style>
</head>
<img src="/user_static/images/vendor_register_background.png" style="position: absolute; left: 40%; top: 60%; transform: translate(-50%, -50%); width: 500px; height: auto; z-index: 1;">
<body>

	<!-- Header Section -->
	<header>
		<div class="container py-2">
			<div class="row py-4 pb-0 pb-sm-4 align-items-center">
				<div class="col-sm-4 col-lg-3 text-center text-sm-start">
					<div
						class="main-logo d-flex align-items-center justify-content-center justify-content-sm-start">
						<a href="/"
							class="d-flex align-items-center text-decoration-none"> <img
							th:src="@{/user_static/images/logo.png}" alt="logo" class="img-fluid">
							<h1 class="mb-0"
								style="font-size: 32px; margin-left: 15px; color: #2B4F76; font-family: 'Noto Sans TC', sans-serif; white-space: nowrap; writing-mode: horizontal-tb;">商家登入</h1>
						</a>
					</div>
				</div>
			</div>
		</div>

		<div class="container-fluid">
			<hr class="m-0">
		</div>
	</header>

	<!-- Main Content -->
	<div class="login-container">
		<h2 class="mb-4">商家登入</h2>
		<div th:if="${messages != null}">
			<div th:each="message : ${messages.values()}" class="alert alert-success">
				<span th:text="${message}"></span>
			</div>
		</div>
		<div th:if="${errors != null and !errors.isEmpty()}" class="alert alert-danger" role="alert">
			<p th:if="${errors.containsKey('email')}" th:text="${errors.get('email')}"></p>
			<p th:if="${errors.containsKey('password')}" th:text="${errors.get('password')}"></p>
			<p th:if="${errors.containsKey('loginFailed')}" th:text="${errors.get('loginFailed')}"></p>
			<p th:if="${errors.containsKey('systemError')}" th:text="${errors.get('systemError')}"></p>
		</div>
		<form th:action="@{/vendor/vendor_login}" method="POST">
			<input type="hidden" name="_csrf" th:value="${_csrf?.token}"/>
			<div class="mb-3">
				<label for="email" class="form-label">電子郵件</label>
				<input type="email" class="form-control" id="email" name="email" 
					   th:class="${errors != null && errors.containsKey('email')} ? 'form-control is-invalid' : 'form-control'"
					   required pattern="[A-Za-z0-9+_.-]+@(.+)$"
					   title="請輸入有效的電子郵件地址">
			</div>
			<div class="mb-3">
				<label for="password" class="form-label">密碼</label>
				<div class="input-group">
					<input type="password" class="form-control" id="password" name="password" required autocomplete="off">
					<button class="btn btn-outline-secondary" type="button" onclick="togglePassword()">
						<i class="fas fa-eye"></i>
					</button>
				</div>
			</div>
			<div class="mb-3 form-check">
				<input type="checkbox" class="form-check-input" id="rememberMe"
					name="rememberMe"> <label class="form-check-label"
					for="rememberMe">記住我</label>
			</div>
			<button type="submit" class="btn btn-primary w-100">登入</button>
		</form>
		<div class="text-center mt-3">
			<p>還沒有帳號？ <a th:href="@{/vendor/vendor_register}">註冊</a></p>
		</div>
	</div>

	<!-- Footer Section -->

	<footer id="footer" class="my-5">
		<div class="container py-5 my-5">
			<div class="row">

				<div class="col-md-3">
					<div class="footer-menu">
						<img th:src="@{/user_static/images/logo.png}" alt="logo">
						<p class="blog-paragraph fs-6 mt-3">Subscribe to our
							newsletter to get updates about our grand offers.</p>
						<div class="social-links">
							<ul class="d-flex list-unstyled gap-2">
								<li class="social"><a href="#"> <iconify-icon
											class="social-icon" icon="ri:facebook-fill"></iconify-icon>
								</a></li>
								<li class="social"><a href="#"> <iconify-icon
											class="social-icon" icon="ri:twitter-fill"></iconify-icon>
								</a></li>
								<li class="social"><a href="#"> <iconify-icon
											class="social-icon" icon="ri:pinterest-fill"></iconify-icon>
								</a></li>
								<li class="social"><a href="#"> <iconify-icon
											class="social-icon" icon="ri:instagram-fill"></iconify-icon>
								</a></li>
								<li class="social"><a href="#"> <iconify-icon
											class="social-icon" icon="ri:youtube-fill"></iconify-icon>
								</a></li>

							</ul>
						</div>
					</div>
				</div>
				<div class="col-md-3">
					<div class="footer-menu">
						<h3>Quick Links</h3>
						<ul class="menu-list list-unstyled">
							<li class="menu-item"><a href="#" class="nav-link">Home</a>
							</li>
							<li class="menu-item"><a href="#" class="nav-link">About
									us</a></li>
							<li class="menu-item"><a href="#" class="nav-link">Offer
							</a></li>
							<li class="menu-item"><a href="#" class="nav-link">Services</a>
							</li>
							<li class="menu-item"><a href="#" class="nav-link">Conatct
									Us</a></li>
						</ul>
					</div>
				</div>
				<div class="col-md-3">
					<div class="footer-menu">
						<h3>
							Help Center
							</h3>
							<ul class="menu-list list-unstyled">
								<li class="menu-item"><a href="#" class="nav-link">FAQs</a>
								</li>
								<li class="menu-item"><a href="#" class="nav-link">Payment</a>
								</li>
								<li class="menu-item"><a href="#" class="nav-link">Returns
										& Refunds</a></li>
								<li class="menu-item"><a href="#" class="nav-link">Checkout</a>
								</li>
								<li class="menu-item"><a href="#" class="nav-link">Delivery
										Information</a></li>
							</ul>
					</div>
				</div>
				<div class="col-md-3">
					<div>
						<h3>Our Newsletter</h3>
						<p class="blog-paragraph fs-6">Subscribe to our newsletter to
							get updates about our grand offers.</p>
						<div
							class="search-bar border rounded-pill border-dark-subtle px-2">
							<form class="text-center d-flex align-items-center" action=""
								method="">
								<input type="text" class="form-control border-0 bg-transparent"
									placeholder="Enter your email here" />
								<iconify-icon class="send-icon" icon="tabler:location-filled"></iconify-icon>
							</form>
						</div>
					</div>
				</div>

			</div>
		</div>
	</footer>

	<div id="footer-bottom">
		<div class="container">
			<hr class="m-0">
			<div class="row mt-3">
				<div class="col-md-6 copyright">
					<p class="secondary-font">© 2023 Waggy. All rights reserved.</p>
				</div>
				<div class="col-md-6 text-md-end">
					<p class="secondary-font">
						Free HTML Template by <a href="https://templatesjungle.com/"
							target="_blank"
							class="text-decoration-underline fw-bold text-black-50">
							TemplatesJungle</a> Distributed by <a href="https://themewagon.com/"
							target="_blank"
							class="text-decoration-underline fw-bold text-black-50">
							ThemeWagon</a>
					</p>
				</div>
			</div>
		</div>
	</div>


	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" 
			integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" 
			crossorigin="anonymous"></script>
	<script th:src="@{/user_static/js/jquery-1.11.0.min.js}"></script>
	<script th:src="@{/user_static/js/plugins.js}"></script>
	<script th:src="@{/user_static/js/script.js}"></script>
	<script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
	
	<script>
		// 確保 DOM 完全加載
		document.addEventListener('DOMContentLoaded', function () {
			// 檢查是否有成功或錯誤消息
			var urlParams = new URLSearchParams(window.location.search);
			
			// 處理註冊成功消息
			if (urlParams.has('registered') && urlParams.get('registered') === 'true') {
				var message = decodeURIComponent(urlParams.get('message') || '註冊成功，請登入');
				showSuccessMessage(message);
				// 2秒後清除消息並跳轉
				setTimeout(function() {
					hideMessage();
				}, 2000);
			}
			
			// 處理登出成功消息
			if (urlParams.has('logout') && urlParams.get('logout') === 'true') {
				var message = decodeURIComponent(urlParams.get('message') || '登出成功');
				showSuccessMessage(message);
				// 2秒後清除消息
				setTimeout(function() {
					hideMessage();
				}, 2000);
			}

			// 處理登入失敗消息
			if (urlParams.has('error')) {
				var errorMessage = decodeURIComponent(urlParams.get('message') || '登入失敗');
				showErrorMessage(errorMessage);
			}
		});

		function showSuccessMessage(message) {
			var alertDiv = document.createElement('div');
			alertDiv.className = 'alert alert-success alert-dismissible fade show text-center position-fixed top-0 start-50 translate-middle-x mt-3';
			alertDiv.setAttribute('role', 'alert');
			alertDiv.innerHTML = message;
			document.body.appendChild(alertDiv);
		}

		function showErrorMessage(message) {
			var alertDiv = document.createElement('div');
			alertDiv.className = 'alert alert-danger alert-dismissible fade show text-center position-fixed top-0 start-50 translate-middle-x mt-3';
			alertDiv.setAttribute('role', 'alert');
			alertDiv.innerHTML = message;
			document.body.appendChild(alertDiv);
		}

		function hideMessage() {
			var alerts = document.getElementsByClassName('alert');
			for(var i = 0; i < alerts.length; i++) {
				alerts[i].remove();
			}
		}

		function togglePassword() {
			var passwordInput = document.getElementById('password');
			var eyeIcon = document.querySelector('.fa-eye');
			
			if (passwordInput.type === 'password') {
				passwordInput.type = 'text';
				eyeIcon.classList.remove('fa-eye');
				eyeIcon.classList.add('fa-eye-slash');
			} else {
				passwordInput.type = 'password';
				eyeIcon.classList.remove('fa-eye-slash');
				eyeIcon.classList.add('fa-eye');
			}
		}
	</script>
</body>
</html>
